!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="5cdfbfac-21a2-42ca-a122-ccd51dfef149",e._sentryDebugIdIdentifier="sentry-dbid-5cdfbfac-21a2-42ca-a122-ccd51dfef149")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5719],{26990:function(e,s,t){t.d(s,{R:function(){return d}});var a=t(78653),n=t(28894),r=t(71686),l=t(98124);let c=a.Z.functions.list();async function i(e,s,t){let{projectRef:a,connectionString:n}=e,r=new Headers(t),{result:i}=await (0,l.R)({projectRef:a,connectionString:n,sql:c.sql,queryKey:["database-functions"]},s,r);return i}let d=function(e){let{projectRef:s,connectionString:t}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.A.databaseFunctions(s),e=>{let{signal:a}=e;return i({projectRef:s,connectionString:t},a)},{enabled:a&&void 0!==s,...l})}},61593:function(e,s,t){var a=t(97458),n=t(3010),r=t.n(n),l=t(67116),c=t(91837),i=t(7268),d=t(52983),o=t(20787),u=t(26990),f=t(52176),x=t(65832),h=t(89112),m=t(11368),p=t(55144),g=t(79367),j=t(29247),b=t.n(j),N=t(63413);s.Z=e=>{let{className:s,size:t="tiny",showError:n=!0,disabled:j=!1,schema:w,value:k,onChange:y,filterFunction:v=()=>!0,noResultsLabel:z=(0,a.jsx)("span",{children:"No functions found in this schema."})}=e,S=(0,g.useRouter)(),{ref:C}=(0,N.UO)(),{project:R}=(0,o.d2)(),[Z,_]=(0,d.useState)(!1),{data:W,error:A,isLoading:E,isError:F,isSuccess:I,refetch:D}=(0,u.R)({projectRef:null==R?void 0:R.ref,connectionString:null==R?void 0:R.connectionString}),T=(null!=W?W:[]).filter(e=>w&&e.schema===w).filter(v),q=r()(T,e=>e.name);return(0,a.jsxs)("div",{className:s,"data-sentry-component":"FunctionSelector","data-sentry-source-file":"FunctionSelector.tsx",children:[E&&(0,a.jsx)(f.z,{type:"default",className:"justify-start",block:!0,size:t,loading:!0,children:"Loading functions..."}),n&&F&&(0,a.jsxs)(x.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(x.Cd,{className:"text-xs text-amber-900",children:"Failed to load functions"}),(0,a.jsxs)(x.X,{className:"text-xs mb-2",children:["Error: ",A.message]}),(0,a.jsx)(f.z,{type:"default",size:"tiny",onClick:()=>D(),children:"Reload functions"})]}),I&&(0,a.jsxs)(h.J2,{open:Z,onOpenChange:_,modal:!1,children:[(0,a.jsx)(h.xo,{asChild:!0,children:(0,a.jsx)(f.z,{size:t,disabled:!!j,type:"default",className:"w-full [&>span]:w-full ".concat("small"===t?"py-1.5":""),iconRight:(0,a.jsx)(l.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:k?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"function:"}),(0,a.jsx)("p",{className:"text-foreground",children:k})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Select a function"})})})}),(0,a.jsx)(h.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(m.mY,{children:[(0,a.jsx)(m.sZ,{placeholder:"Search functions..."}),(0,a.jsxs)(m.e8,{children:[(0,a.jsx)(m.rb,{children:"No functions found"}),(0,a.jsx)(m.fu,{children:(0,a.jsxs)(p.x,{className:(q||[]).length>7?"h-[210px]":"",children:[!q.length&&(0,a.jsx)(m.di,{disabled:!0,className:"flex items-center justify-between space-x-2 w-full",children:z},"no-function-found"),q.map(e=>(0,a.jsxs)(m.di,{value:e.name.replaceAll('"',""),className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{y(e.name),_(!1)},onClick:()=>{y(e.name),_(!1)},children:[(0,a.jsx)("span",{children:e.name}),k===e.name&&(0,a.jsx)(c.Z,{className:"text-brand",size:14,strokeWidth:2})]},e.id))]})}),(0,a.jsx)(m.zz,{}),(0,a.jsx)(m.fu,{children:(0,a.jsx)(m.di,{className:"cursor-pointer w-full",onSelect:()=>{_(!1),S.push("/project/".concat(C,"/database/functions"))},onClick:()=>_(!1),children:(0,a.jsxs)(b(),{href:"/project/".concat(C,"/database/functions"),onClick:()=>{_(!1)},className:"w-full flex items-center gap-2",children:[(0,a.jsx)(i.Z,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"New function"})]})})})]})]})})]})]})}},47137:function(e,s,t){var a=t(97458),n=t(67116),r=t(91837),l=t(7268),c=t(52983),i=t(198),d=t(20787),o=t(33443),u=t(40809),f=t(52176),x=t(65832),h=t(89112),m=t(11368),p=t(55144);s.Z=e=>{let{className:s,disabled:t=!1,size:g="tiny",showError:j=!0,selectedSchemaName:b,supportSelectAll:N=!1,excludedSchemas:w=[],onSelectSchema:k,onSelectCreateSchema:y}=e,[v,z]=(0,c.useState)(!1),S=(0,u.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:C}=(0,d.d2)(),{data:R,isLoading:Z,isSuccess:_,isError:W,error:A,refetch:E}=(0,o.Q1)({projectRef:null==C?void 0:C.ref,connectionString:null==C?void 0:C.connectionString}),F=(R||[]).filter(e=>!w.includes(e.name)).sort((e,s)=>e.name.localeCompare(s.name));return(0,a.jsxs)("div",{className:s,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[Z&&(0,a.jsx)(f.z,{type:"default",className:"justify-start",block:!0,size:g,loading:!0,children:"Loading schemas..."}),j&&W&&(0,a.jsxs)(x.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(x.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(x.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==A?void 0:A.message]}),(0,a.jsx)(f.z,{type:"default",size:"tiny",onClick:()=>E(),children:"Reload schemas"})]}),_&&(0,a.jsxs)(h.J2,{open:v,onOpenChange:z,modal:!1,children:[(0,a.jsx)(h.xo,{asChild:!0,children:(0,a.jsx)(f.z,{size:g,disabled:t,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,a.jsx)(n.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:b?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema:"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===b?"All schemas":b})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schemaâ€¦"})})})}),(0,a.jsx)(h.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(m.mY,{children:[(0,a.jsx)(m.sZ,{placeholder:"Find schema..."}),(0,a.jsxs)(m.e8,{children:[(0,a.jsx)(m.rb,{children:"No schemas found"}),(0,a.jsx)(m.fu,{children:(0,a.jsxs)(p.x,{className:(F||[]).length>7?"h-[210px]":"",children:[N&&(0,a.jsxs)(m.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{k("*"),z(!1)},onClick:()=>{k("*"),z(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===b&&(0,a.jsx)(r.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==F?void 0:F.map(e=>(0,a.jsxs)(m.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{k(e.name),z(!1)},onClick:()=>{k(e.name),z(!1)},children:[(0,a.jsx)("span",{children:e.name}),b===e.name&&(0,a.jsx)(r.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==y&&S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.zz,{}),(0,a.jsx)(m.fu,{children:(0,a.jsxs)(m.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{y(),z(!1)},onClick:()=>{y(),z(!1)},children:[(0,a.jsx)(l.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},9189:function(e,s,t){t.d(s,{W:function(){return d},j:function(){return o}});var a=t(97458),n=t(11908),r=t(52983),l=t(68006),c=t(92968),i=t(39635);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("flex flex-col -space-y-px w-full",t),...r,ref:s})});d.displayName="RadioGroupStacked";let o=r.forwardRef((e,s)=>{let{image:t,label:r,showIndicator:d=!0,...o}=e;return(0,a.jsx)(n.ck,{ref:s,...o,className:(0,i.cn)("flex flex-col gap-2","w-full","bg-overlay/50 disabled:opacity-50","border","first-of-type:rounded-t-lg last-of-type:rounded-b-lg","shadow-sm","enabled:hover:bg-surface-300","enabled:hover:border-foreground-muted","enabled:cursor-pointer disabled:cursor-not-allowed","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground-muted","transition","group",o.className),children:(0,a.jsxs)("div",{className:"flex gap-3 w-full px-[21px] py-3",children:[d&&(0,a.jsx)("div",{className:(0,i.cn)("aspect-square h-4 w-4 min-w-4 min-h-4","rounded-full border group-data-[state=checked]:border-foreground-muted","group-focus:border-foreground-muted","group-hover:border-foreground-muted","ring-offset-background","group-focus:outline-none","group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2","flex items-center justify-center","transition"),children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.25 items-start",children:[(0,a.jsx)(c._,{htmlFor:o.value,className:(0,i.cn)("block","-mt-[0.15rem]","text-sm transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground"),children:r}),o.description&&(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:o.description}),o.children]})]})})});o.displayName="RadioGroupStackedItem"},86812:function(e,s,t){t.d(s,{r:function(){return o}});var a=t(97458),n=t(56384),r=t(80086),l=t(52983),c=t(39635);let i=(0,r.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,r.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),o=l.forwardRef((e,s)=>{let{className:t,size:r,...l}=e;return(0,a.jsx)(n.fC,{className:(0,c.cn)(i({size:r}),t),...l,ref:s,children:(0,a.jsx)(n.bU,{className:(0,c.cn)(d({size:r}))})})});o.displayName=n.fC.displayName}}]);