!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2b111efe-fd5d-42d1-9ee0-1a092e4f08f7",e._sentryDebugIdIdentifier="sentry-dbid-2b111efe-fd5d-42d1-9ee0-1a092e4f08f7")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{96018:function(e,t,n){n.d(t,{g:function(){return o}});var a=n(64618),s=n(34549),r=n(73029),i=n(92787);async function l(e){let{sql:t}=e,n=await (0,r.v_)(i.GW+"/api/ai/sql/title",{sql:t});if(!(0,r.d8)(n))throw n.error;return n}let o=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.D)(e=>l(e),{async onSuccess(t,n,a){await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?s.Am.error("Failed to generate title: ".concat(e.message)):t(e,n,a)},...n})}},90093:function(e,t,n){n.d(t,{z:function(){return d}});var a=n(36457),s=n(64618),r=n(34549),i=n(23346),l=n(68085);async function o(e,t){let{projectRef:n,ids:a}=e,{data:s,error:r}=await (0,i.IV)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:n},query:{ids:a}},signal:t});return r&&(0,i.S3)(r),s.map(e=>e.id)}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.NL)();return(0,s.D)(e=>o(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await i.invalidateQueries(l.$.allContentLists(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.Am.error("Failed to delete contents: ".concat(e.message)):t(e,n,a)},...n})}},90671:function(e,t,n){n.d(t,{A:function(){return i},N:function(){return l}});var a=n(28894),s=n(23346),r=n(68085);async function i(e,t){let{projectRef:n,id:a}=e;if(void 0===n)throw Error("projectRef is required");if(void 0===a)throw Error("Content ID is required");let{data:r,error:i}=await (0,s.U2)("/platform/projects/{ref}/content/item/{id}",{params:{path:{ref:n,id:a}},signal:t});if(i)throw(0,s.S3)(i);return r}let l=function(e){let{projectRef:t,id:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.$.resource(t,n),e=>{let{signal:a}=e;return i({projectRef:t,id:n},a)},{enabled:s&&void 0!==t&&void 0!==n,...l})}},16221:function(e,t,n){n.d(t,{s:function(){return d}});var a=n(36457),s=n(64618),r=n(34549),i=n(23346),l=n(68085);async function o(e,t){let{projectRef:n,id:a,type:s,content:r,name:l,description:o}=e,{data:d,error:c}=await (0,i.r$)("/platform/projects/{ref}/content",{params:{path:{ref:n},query:{id:a}},body:{id:a,type:s,content:r,name:l,description:o},signal:t});return c&&(0,i.S3)(c),d[0]}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.NL)();return(0,s.D)(e=>o(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await i.invalidateQueries(l.$.allContentLists(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.Am.error("Failed to update content: ".concat(e.message)):t(e,n,a)},...n})}},61673:function(e,t,n){n.d(t,{KJ:function(){return i},md:function(){return o}});var a=n(90688),s=n(23346),r=n(68085);let i=100;async function l(e,t){let{projectRef:n,cursor:a,sort:r,name:l}=e;if(void 0===n)throw Error("projectRef is required");let{data:o,error:d}=await (0,s.U2)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n},query:{type:"sql",cursor:a,limit:i.toString(),sort_by:r,sort_order:"name"===r?"asc":"desc",name:l,visibility:"user"}},signal:t});if(d)throw(0,s.S3)(d);return{...o.data,cursor:o.cursor}}let o=function(e){let{projectRef:t,name:n,sort:s}=e,{enabled:i=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.N)(r.$.folders(t,{name:n,sort:s}),e=>{let{signal:a,pageParam:r}=e;return l({projectRef:t,cursor:r,name:n,sort:s},a)},{enabled:i&&void 0!==t,getNextPageParam:e=>e.cursor,...o})}},52184:function(e,t,n){n.d(t,{v:function(){return o}});var a=n(90688),s=n(23346),r=n(68085),i=n(61673);async function l(e,t){let{projectRef:n,cursor:a,visibility:r,favorite:l,name:o,sort:d}=e;if(void 0===n)throw Error("projectRef is required for getSqlSnippets");let{data:c,error:u}=await (0,s.U2)("/platform/projects/{ref}/content",{params:{path:{ref:n},query:{type:"sql",cursor:a,visibility:r,favorite:l,name:o,limit:i.KJ.toString(),sort_by:d,sort_order:"name"===d?"asc":"desc"}},signal:t});if(u)throw u;return{cursor:c.cursor,contents:c.data}}let o=function(e){let{projectRef:t,sort:n,name:s,visibility:i,favorite:o}=e,{enabled:d=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.N)(r.$.sqlSnippets(t,{sort:n,name:s,visibility:i,favorite:o}),e=>{let{signal:a,pageParam:r}=e;return l({projectRef:t,cursor:r,sort:n,name:s,visibility:i,favorite:o},a)},{enabled:d&&void 0!==t,getNextPageParam:e=>e.cursor,...c})}},49650:function(e,t,n){n.d(t,{Z:function(){return ts}});var a=n(97458),s=n(52983),r=n(28977),i=n.n(r),l=n(64528),o=n(60928),d=n(34549),c=n(95767),u=n(58018),p=n(36457),m=n(64618),f=n(98124),x=n(8853);async function h(e){let{pid:t,projectRef:n,connectionString:a}=e,{result:s}=await (0,f.R)({projectRef:n,connectionString:a,sql:"select pg_terminate_backend(".concat(t,")")});return s}let y=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,p.NL)();return(0,m.D)(e=>h(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(x.M.ongoingQueries(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?d.Am.error("Failed to abort query: ".concat(e.message)):t(e,n,a)},...n})};var v=n(28894);let g=()=>"\nselect pid, query, query_start from pg_stat_activity where state = 'active' and datname = 'postgres';\n".trim();async function j(e,t){let{projectRef:n,connectionString:a}=e,s=g().trim(),{result:r}=await (0,f.R)({projectRef:n,connectionString:a,sql:s,queryKey:["ongoing-queries"]},t);return(null!=r?r:[]).filter(e=>!e.query.startsWith(s))}let S=function(e){let{projectRef:t,connectionString:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,v.a)(x.M.ongoingQueries(t),e=>{let{signal:a}=e;return j({projectRef:t,connectionString:n},a)},{enabled:a&&void 0!==t,...s})};var b=n(92656),w=n(4729),N=n(92787),M=n(12502),C=n(35995),L=n(52176),q=n(24716),Q=n(39635),E=n(59158),_=n(42130);let P=e=>{let{visible:t,onClose:n}=e,[r,p]=(0,w.x)({replace:!0}),m=(0,b.Vm)(),f=(0,M.TF)(),[x,h]=(0,s.useState)(),{data:v}=(0,u.bN)({projectRef:null==m?void 0:m.ref}),g=(null!=v?v:[]).find(e=>e.identifier===f.selectedDatabaseId),{data:j,error:P,isError:D,isLoading:I,isFetching:k,refetch:Z}=S({projectRef:null==m?void 0:m.ref,connectionString:null==g?void 0:g.connectionString},{enabled:!N.Qy||N.Qy&&(null==g?void 0:g.connectionString)!==void 0,staleTime:5e3}),F=null!=j?j:[],{mutate:A,isLoading:z}=y({onSuccess:()=>{d.Am.success("Successfully aborted query (ID: ".concat(x,")")),h(void 0)}}),R=()=>{p({viewOngoingQueries:void 0}),n()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.yo,{open:t,onOpenChange:()=>R(),"data-sentry-element":"Sheet","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:(0,a.jsxs)(C.ue,{size:"lg","data-sentry-element":"SheetContent","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:[(0,a.jsxs)(C.Tu,{"data-sentry-element":"SheetHeader","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:[(0,a.jsxs)(C.bC,{className:"flex items-center gap-x-2","data-sentry-element":"SheetTitle","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:["Running queries on"," ",(null==g?void 0:g.identifier)===(null==m?void 0:m.ref)?"primary database":"read replica",(0,a.jsx)(L.z,{type:"default",className:"px-1.5",loading:I||k,icon:(0,a.jsx)(l.Z,{}),onClick:()=>Z(),"data-sentry-element":"Button","data-sentry-source-file":"OngoingQueriesPanel.tsx"})]}),(0,a.jsxs)(C.Ei,{"data-sentry-element":"SheetDescription","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:["There ",1===F.length?"is":"are"," ",(0,a.jsx)("span",{className:"text-foreground-light",children:F.length})," quer",1===F.length?"y":"ies"," currently running"," ",(null==g?void 0:g.identifier)!==(null==m?void 0:m.ref)?"on replica ".concat(null==g?void 0:g.identifier):""]})]}),(0,a.jsxs)("div",{className:"max-h-full h-full divide-y overflow-y-auto",children:[D&&(0,a.jsx)("div",{className:"flex items-center justify-center h-full px-16",children:(0,a.jsx)(c.Z,{subject:"Failed to retrieve ongoing queries",error:P})}),0===F.length&&(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 items-center justify-center h-full text-foreground-light text-sm",children:[(0,a.jsxs)("span",{children:["No queries are currently running on the"," ",(null==g?void 0:g.identifier)!==(null==m?void 0:m.ref)?"read replica ".concat(null==g?void 0:g.identifier):(null!=v?v:[]).length>1?"primary database":"database"]}),(0,a.jsx)(L.z,{type:"default",loading:I||k,icon:(0,a.jsx)(l.Z,{}),onClick:()=>Z(),children:"Refresh"})]}),F.map(e=>(0,a.jsxs)(C.DN,{className:"flex justify-between gap-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 w-full",children:[(0,a.jsx)(q.d,{hideLineNumbers:!0,value:e.query,language:"sql",className:(0,Q.cn)("max-w-none max-h-52 w-full","!bg-transparent !py-3 !px-3.5 prose dark:prose-dark","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap")}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("p",{className:"text-foreground-light text-xs",children:["PID: ",e.pid]}),(0,a.jsx)("p",{className:"text-foreground-light text-xs",children:"â€¢"}),(0,a.jsxs)("p",{className:"text-foreground-light text-xs",children:["Started since: ",i()(e.query_start).format("DD MMM YYYY HH:mm (ZZ)")]})]})]}),(0,a.jsxs)(E.u,{children:[(0,a.jsx)(E.aJ,{asChild:!0,children:(0,a.jsx)(L.z,{type:"warning",className:"px-1.5",icon:(0,a.jsx)(o.Z,{}),onClick:()=>h(e.pid)})}),(0,a.jsx)(E._v,{side:"bottom",children:"Abort query"})]})]},e.pid))]})]})}),(0,a.jsx)(_.Z,{loading:z,variant:"warning",title:"Confirm to abort this query? (ID: ".concat(x,")"),visible:void 0!==x,onCancel:()=>h(void 0),onConfirm:()=>{void 0!==x&&A({pid:x,projectRef:null==m?void 0:m.ref,connectionString:null==g?void 0:g.connectionString})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:(0,a.jsx)("p",{className:"text-sm",children:"This will force the query to stop running."})})]})};var D=n(88551),I=n(9386),k=n(198),Z=n(7268),F=n(93786),A=n(59904),z=n(79367),R=n(63413),O=n(40809),T=n(69117),B=n(62880),U=n(99794),V=n(36153),$=n(23382),G=n(41244),W=n(22675),Y=n(40184),K=n(40638),J=n(97687),X=n.n(J),H=n(19215),ee=n(29247),et=n.n(ee),en=n(27889),ea=n(72866),es=n(42756),er=n(32800),ei=n(63277),el=e=>{var t;let{id:n,...r}=e,i=null===(t=(0,B.B0)().snippets[n])||void 0===t?void 0:t.snippet,l=X()(null==i?void 0:i.name),[o,d]=(0,s.useState)("CLI"),c=[{id:"migration",label:"Migration",title:"Download as migration",description:"Download the snippet in a new migration named `".concat(l,"`"),cli:(0,ei.kL)(n,l),npm:(0,ei.kL)(n,l,!0)},{id:"seed",label:"Seed file",title:"Download as seed file",description:"If your query consists of sample data, append the snippet to the end of `supabase/seed.sql`",cli:(0,ei.YI)(n),npm:(0,ei.YI)(n,!0)},{id:"sql",label:"SQL file",title:"Download as SQL file",description:"Download the snippet directly into a new SQL file named `".concat(l,".sql`"),cli:(0,ei.y4)(n,l),npm:(0,ei.y4)(n,l,!0)}];return(0,a.jsx)(ea.Z,{hideFooter:!0,showCloseButton:!0,size:"xlarge",header:(0,a.jsx)("p",{children:"Download snippet as local migration file via the Supabase CLI."}),...r,"data-sentry-element":"Modal","data-sentry-component":"DownloadSnippetModal","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 relative pt-2",children:[(0,a.jsx)(es.Z,{type:"underlined",listClassNames:"pl-5","data-sentry-element":"Tabs","data-sentry-source-file":"DownloadSnippetModal.tsx",children:c.map(e=>(0,a.jsx)(es.Z.Panel,{id:e.id,label:e.label,children:(0,a.jsxs)(ea.Z.Content,{className:"!py-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("p",{className:"text-base",children:e.title}),(0,a.jsx)(er.U,{className:"text-sm text-scale-1000 [&>p>code]:!break-normal",content:e.description})]}),(0,a.jsx)(en.Z,{width:50,options:["CLI","NPM"],activeOption:o,borderOverride:"border-muted",onClickOption:()=>"CLI"===o?d("NPM"):d("CLI")})]}),(0,a.jsx)("pre",{children:(0,a.jsx)(q.d,{language:"bash",className:"language-bash prose dark:prose-dark max-w-none",children:"CLI"===o?e.cli:e.npm})})]})},e.id))}),(0,a.jsxs)(ea.Z.Content,{className:"w-full flex items-center justify-between pt-0","data-sentry-element":"unknown","data-sentry-source-file":"DownloadSnippetModal.tsx",children:[(0,a.jsx)("p",{className:"text-xs text-lighter",children:"Run this command from your project directory"}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-x-2",children:[(0,a.jsx)(L.z,{asChild:!0,type:"default",icon:(0,a.jsx)(H.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,a.jsx)(et(),{href:"https://supabase.com/docs/guides/deployment/database-migrations",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"DownloadSnippetModal.tsx",children:"About migrations"})}),(0,a.jsx)(L.z,{asChild:!0,type:"default",icon:(0,a.jsx)(H.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,a.jsx)(et(),{href:"https://supabase.com/docs/guides/cli/local-development",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"DownloadSnippetModal.tsx",children:"About CLI"})})]})]})]})})},eo=n(78751),ed=n(9528),ec=n(91837),eu=n(86848),ep=n(5394),em=n(90671),ef=n(96158),ex=n(10166),eh=n(23206),ey=n(75135),ev=n(92968),eg=n(89112),ej=n(11368),eS=n(55144),eb=n(93475);let ew=e=>{var t;let{visible:n,snippets:r=[],onClose:i}=e,{ref:l}=(0,R.UO)(),o=(0,B.B0)(),[c,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)(),{mutateAsync:f,isLoading:x}=(0,ex.P)(),{mutateAsync:h,isLoading:y}=(0,ef.R)({onError:e=>{d.Am.error("Failed to move query: ".concat(e.message))}}),v="new-folder"===p?ep.Ry({name:ep.Z_().min(1,"Please provide a name for the folder")}).refine(e=>!o.allFolderNames.includes(e.name),{message:"This folder name already exists",path:["name"]}):ep.Ry({}),g=(0,eu.cI)({mode:"onSubmit",reValidateMode:"onSubmit",resolver:(0,eo.F)(v),defaultValues:{name:""}}),j=(0,B.Gd)(l),S="root"===p?"Root of the editor":"new-folder"===p?"Create a new folder":null===(t=j.find(e=>e.id===p))||void 0===t?void 0:t.name,b=1===r.length&&(!r[0].folder_id&&"root"===p||r[0].folder_id===p),w=1===r.length&&(!r[0].folder_id&&"root"===p||r[0].folder_id===p),N=async e=>{if(!l)return console.error("Project ref is required");try{let t=p;if("new-folder"===p&&"name"in e){let{id:n}=await f({projectRef:l,name:e.name});t=n}await Promise.all(r.map(async e=>{let n=null==e?void 0:e.content;if(void 0===n){let{content:t}=await (0,em.A)({projectRef:l,id:e.id});"sql"in t&&(n=t)}if(void 0===n)return d.Am.error("Failed to save snippet: Unable to retrieve snippet contents");await h({projectRef:l,payload:{id:e.id,type:"sql",name:e.name,description:e.description,visibility:e.visibility,project_id:e.project_id,owner_id:e.owner_id,folder_id:"root"===p?null:t,content:n}})})),d.Am.success("Successfully moved ".concat(1===r.length?'"'.concat(r[0].name,'"'):"".concat(r.length," snippets")," to ").concat("root"===p?"the root of the editor":S)),r.forEach(e=>{o.updateSnippet({id:e.id,snippet:{...e,folder_id:"root"===p?null:p},skipSave:!0})}),i()}catch(e){d.Am.error("Failed to create new folder: ".concat(e.message))}};return(0,s.useEffect)(()=>{if(n&&void 0!==r){if(1===r.length){var e;m(null!==(e=r[0].folder_id)&&void 0!==e?e:"root")}else m("root");g.reset({name:""})}},[n,r]),(0,a.jsx)(eh.Vq,{open:n,onOpenChange:()=>i(),"data-sentry-element":"Dialog","data-sentry-component":"MoveQueryModal","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsx)(eh.cZ,{"data-sentry-element":"DialogContent","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsx)(ey.l0,{...g,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsxs)("form",{id:"move-snippet",onSubmit:g.handleSubmit(N),children:[(0,a.jsxs)(eh.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsxs)(eh.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"MoveQueryModal.tsx",children:["Move ",1===r.length?'"'.concat(r[0].name,'"'):"".concat(r.length)," ","snippet",r.length>1?"s":""," to a folder"]}),(0,a.jsxs)(eh.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"MoveQueryModal.tsx",children:["Select which folder to move your quer",r.length>1?"ies":"y"," to"]})]}),(0,a.jsx)(eh.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,a.jsxs)(eh.VO,{className:"py-5 flex flex-col gap-y-4","data-sentry-element":"DialogSection","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,a.jsx)(ev._,{className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:"Select a folder"}),(0,a.jsxs)(eg.J2,{open:c,onOpenChange:u,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsx)(eg.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsx)(L.z,{block:!0,size:"small",type:"default",className:"pr-2 justify-between",iconRight:(0,a.jsx)(ed.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[S,b&&" (Current)"]})})}),(0,a.jsx)(eg.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsxs)(ej.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsx)(ej.sZ,{placeholder:"Find folder...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,a.jsxs)(ej.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsx)(ej.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:"No folders found"}),(0,a.jsx)(ej.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsxs)(eS.x,{className:(j||[]).length>6?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsxs)(ej.di,{value:"root",className:"cursor-pointer w-full justify-between",onSelect:()=>{u(!1),m("root")},onClick:()=>{u(!1),m("root")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsxs)("span",{children:["Root of the editor",1===r.length&&null===r[0].folder_id&&" (Current)"]}),"root"===p&&(0,a.jsx)(ec.Z,{size:14})]},"root"),null==j?void 0:j.map(e=>(0,a.jsxs)(ej.di,{value:e.id,className:"cursor-pointer w-full justify-between",onSelect:()=>{u(!1),m(e.id)},onClick:()=>{u(!1),m(e.id)},children:[(0,a.jsxs)("span",{children:[e.name,1===r.length&&r[0].folder_id===e.id&&" (Current)"]}),e.id===p&&(0,a.jsx)(ec.Z,{size:14})]},e.id))]})}),(0,a.jsx)(ej.zz,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,a.jsx)(ej.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,a.jsxs)(ej.di,{className:"cursor-pointer w-full justify-start gap-x-2",onSelect:e=>{u(!1),m("new-folder")},onClick:()=>{u(!1),m("new-folder")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsx)(Z.Z,{size:14,strokeWidth:1.5,"data-sentry-element":"Plus","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,a.jsx)("p",{children:"New folder"})]})})]})]})})]})]}),"new-folder"===p&&(0,a.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,a.jsx)(ey.Wi,{name:"name",control:g.control,render:e=>{let{field:t}=e;return(0,a.jsxs)(ey.xJ,{className:"flex flex-col gap-y-2",children:[(0,a.jsx)(ey.lX,{children:"Provide a name for your new folder"}),(0,a.jsx)(ey.NI,{children:(0,a.jsx)(eb.I,{autoFocus:!0,...t,autoComplete:"off",disabled:y||x})}),(0,a.jsx)(ey.zG,{})]})}})})]}),(0,a.jsxs)(eh.cN,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,a.jsx)(L.z,{type:"default",disabled:y||x,onClick:()=>i(),"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:"Cancel"}),(0,a.jsx)(L.z,{type:"primary",htmlType:"submit",disabled:w,loading:y||x,"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:"Move file"})]})]})})})})};var eN=n(96018),eM=n(16221),eC=n(35934),eL=n(18624),eq=n(55060),eQ=n(399),eE=n(78940),e_=n(68813),eP=e=>{let{snippet:t={},visible:n,onCancel:r,onComplete:i}=e,{ref:l}=(0,R.UO)(),o=(0,eL.l)(),c=(0,B.B0)(),{data:u}=(0,eC.Gl)({orgSlug:null==o?void 0:o.slug}),p="sql"===t.type,m=(0,e_.$w)(u),{id:f,name:x,description:h}=t,[y,v]=(0,s.useState)(x),[g,j]=(0,s.useState)(h),{mutate:S,isLoading:b}=(0,eN.g)({onSuccess:e=>{let{title:t,description:n}=e;v(t),g||j(n)},onError:e=>{d.Am.error("Failed to rename query: ".concat(e.message))}}),w=async()=>{if("content"in t&&p)S({sql:t.content.sql});else try{let{content:e}=await (0,em.A)({projectRef:l,id:t.id});"sql"in e&&S({sql:e.sql})}catch(e){d.Am.error("Unable to generate title based on query contents")}},{mutateAsync:N}=(0,eM.s)(),M=async(e,n)=>{let{setSubmitting:a}=n;if(!l)return console.error("Project ref is required");if(!f)return console.error("Snippet ID is required");a(!0);try{let e=t;"content"in e||(e=await (0,em.A)({projectRef:l,id:f}),c.addSnippet({projectRef:l,snippet:e}));let n=await N({projectRef:l,id:f,type:e.type,content:e.content,name:y,description:g});c.renameSnippet({id:f,name:n.name,description:n.description}),d.Am.success("Successfully renamed snippet!"),i&&i()}catch(e){a(!1),d.Am.error("Failed to rename snippet: ".concat(e.message))}};return(0,s.useEffect)(()=>{v(x),j(h)},[t.id]),(0,a.jsx)(ea.Z,{visible:n,onCancel:r,hideFooter:!0,header:"Rename",size:"small","data-sentry-element":"Modal","data-sentry-component":"RenameQueryModal","data-sentry-source-file":"RenameQueryModal.tsx",children:(0,a.jsx)(eq.Z,{onReset:r,validateOnBlur:!0,initialValues:{name:null!=x?x:"",description:null!=h?h:""},validate:()=>{let e={};return y||(e.name="Please enter a query name"),e},onSubmit:M,"data-sentry-element":"Form","data-sentry-source-file":"RenameQueryModal.tsx",children:e=>{let{isSubmitting:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z.Content,{className:"space-y-4",children:[(0,a.jsx)(eQ.Z,{label:"Name",id:"name",name:"name",value:y,onChange:e=>v(e.target.value)}),(0,a.jsx)("div",{className:"flex w-full justify-end mt-2",children:!m&&(0,a.jsx)(L.z,{type:"default",onClick:()=>w(),size:"tiny",disabled:b,children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"scale-75",children:(0,a.jsx)(eE.c,{loading:b})}),(0,a.jsx)("span",{children:"Rename with Supabase AI"})]})})}),(0,a.jsx)(eQ.Z.TextArea,{label:"Description",id:"description",placeholder:"Describe query",size:"medium",textAreaClassName:"resize-none",value:g,onChange:e=>j(e.target.value)})]}),(0,a.jsx)(ea.Z.Separator,{}),(0,a.jsxs)(ea.Z.Content,{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(L.z,{htmlType:"reset",type:"default",onClick:r,disabled:t,children:"Cancel"}),(0,a.jsx)(L.z,{htmlType:"submit",loading:t,disabled:t,children:"Rename query"})]})]})}})})},eD=n(10621),eI=n(23346),ek=n(68085);async function eZ(e,t){let{projectRef:n,type:a,visibility:s,favorite:r,name:i}=e;if(void 0===n)throw Error("projectRef is required");let l={type:a};s&&(l.visibility=s),r&&(l.favorite=r),i&&(l.name=i);let{data:o,error:d}=await (0,eI.U2)("/platform/projects/{ref}/content/count",{params:{path:{ref:n},query:l},signal:t});if(d)throw(0,eI.S3)(d);return o}let eF=function(e){let{projectRef:t,type:n,visibility:a,favorite:s,name:r}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,v.a)(ek.$.count(t,n,{visibility:a,favorite:s,name:r}),e=>{let{signal:i}=e;return eZ({projectRef:t,type:n,visibility:a,favorite:s,name:r},i)},{enabled:!1,...l})};var eA=n(90093);async function ez(e,t){let{projectRef:n,ids:a}=e,{data:s,error:r}=await (0,eI.IV)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n},query:{ids:a}},signal:t});if(r)throw(0,eI.S3)(r);return s}let eR=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,p.NL)();return(0,m.D)(e=>ez(e),{async onSuccess(e,a,r){let{projectRef:i}=a;n&&await s.invalidateQueries(ek.$.folders(i)),await (null==t?void 0:t(e,a,r))},async onError(t,n,a){void 0===e?d.Am.error("Failed to delete folder: ".concat(t.message)):e(t,n,a)},...a})};var eO=n(61673),eT=n(52184),eB=n(86985),eU=n(27601),eV=n(96320),e$=n(50290),eG=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3",children:[(0,a.jsx)(e$.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,a.jsx)(e$.O,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3",children:[(0,a.jsx)(e$.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,a.jsx)(e$.O,{className:"w-32 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-75",children:[(0,a.jsx)(e$.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,a.jsx)(e$.O,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-50",children:[(0,a.jsx)(e$.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,a.jsx)(e$.O,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-25",children:[(0,a.jsx)(e$.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,a.jsx)(e$.O,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]})]});let eW={id:0,name:"",parent:null,children:[]},eY=e=>{var t,n;if(void 0===e)return[eW];let{folders:a,contents:s}=e,r=(null==a?void 0:a.map(e=>{var t;let{id:n,name:a}=e;return{id:n,name:a,parent:0,isBranch:!0,children:null!==(t=null==s?void 0:s.filter(e=>e.folder_id===n).map(e=>e.id))&&void 0!==t?t:[],metadata:e}}))||[],i=(null==s?void 0:s.map(e=>{let{id:t,name:n,folder_id:a}=e;return{id:t,name:n,parent:null!=a?a:0,children:[],metadata:e}}))||[];return[{id:0,name:"",parent:null,children:[...null===(t=a||[])||void 0===t?void 0:t.map(e=>e.id),...null===(n=(s||[]).filter(e=>!e.folder_id))||void 0===n?void 0:n.map(e=>e.id)]},...r,...i]};function eK(e){let t=new Set,n=e.filter(e=>0===e.parent);if(n.length>0){let e=n[n.length-1];"string"==typeof e.id&&t.add(e.id),n.forEach(e=>{if(e.children.length>0){let n=e.children[e.children.length-1];"string"==typeof n&&t.add(n)}})}return t}var eJ=n(19760),eX=n(26562),eH=n(75514),e0=n(89808),e1=n(16843),e2=n(24894),e4=n(80459),e6=n(6967),e8=n(90688);async function e3(e,t){let{projectRef:n,folderId:a,cursor:s,sort:r,name:i}=e;if(void 0===n)throw Error("projectRef is required");if(void 0===a)throw Error("folderId is required");let{data:l,error:o}=await (0,eI.U2)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:n,id:a},query:{cursor:s,limit:eO.KJ.toString(),sort_by:r,sort_order:"name"===r?"asc":"desc",name:i}},signal:t});if(o)throw(0,eI.S3)(o);return{...l.data,cursor:l.cursor}}let e5=function(e){let{projectRef:t,folderId:n,name:a,sort:s}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e8.N)(ek.$.folderContents(t,n,{name:a,sort:s}),e=>{let{signal:r,pageParam:i}=e;return e3({projectRef:t,folderId:n,cursor:i,name:a,sort:s},r)},{enabled:r&&void 0!==t&&void 0!==n,getNextPageParam:e=>e.cursor,...i})};var e9=n(29718),e7=n(54333);let te=e=>{let{element:t,isBranch:n,isExpanded:r,level:i,status:l,isSelected:o,isMultiSelected:d,getNodeProps:c,onSelectCreate:u,onSelectDelete:p,onSelectRename:m,onSelectMove:f,onSelectShare:x,onSelectUnshare:h,onSelectDownload:y,onSelectCopyPersonal:v,onEditSave:g,onMultiSelect:j,isLastItem:S,hasNextPage:b,fetchNextPage:w,isFetchingNextPage:N,sort:M,name:C,onFolderContentsChange:q}=e,Q=(0,z.useRouter)(),{id:E,ref:_}=(0,e6.U)(),{profile:P}=(0,T.Un)(),{className:D,onClick:I}=c(),F=(0,B.B0)(),A=(null==P?void 0:P.id)===(null==t?void 0:t.metadata.owner_id),U="project"===t.metadata.visibility,V="editing"===l,$=(0,O.Xo)(k.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==P?void 0:P.id},subject:{id:null==P?void 0:P.id}}),G=0===t.parent?void 0:t.parent,W=n&&r,{data:Y,isSuccess:K,isLoading:J,isFetchingNextPage:X,hasNextPage:ee,fetchNextPage:en,isPreviousData:ea,isFetching:es}=e5({projectRef:_,folderId:null!=G?G:t.id,name:C,sort:M},{enabled:W,keepPreviousData:!0});(0,s.useEffect)(()=>{_&&K&&Y.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{F.addSnippet({projectRef:_,snippet:e})})})},[_,null==Y?void 0:Y.pages]);let er=(0,e9.Z)(q);(0,s.useEffect)(()=>{if(W){var e;null===(e=er.current)||void 0===e||e.call(er,{isLoading:J||ea&&es,snippets:null==Y?void 0:Y.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]})})}},[null==Y?void 0:Y.pages,es,J,ea,W]);let ei=void 0!==G;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e7.xV,{modal:!1,"data-sentry-element":"ContextMenu_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:[(0,a.jsx)(e7.W4,{asChild:!0,"data-sentry-element":"ContextMenuTrigger_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:(0,a.jsx)(eU.A7,{level:i,xPadding:16,name:t.name,className:D,isExpanded:r,isBranch:n,isSelected:o||E===t.id,isEditing:V,isLoading:W&&J||"saving"===l,onEditSubmit:e=>{void 0!==g&&g(e)},onClick:e=>{n?V||I(e):e.shiftKey&&"new"!==E?null==j||j(t.id):Q.push("/project/".concat(_,"/sql/").concat(t.id))},"data-sentry-element":"TreeViewItem","data-sentry-source-file":"SQLEditorTreeViewItem.tsx"})}),(0,a.jsx)(e7.h_,{onCloseAutoFocus:e=>e.stopPropagation(),"data-sentry-element":"ContextMenuContent_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:n?(0,a.jsxs)(a.Fragment,{children:[void 0!==u&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>u(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(Z.Z,{size:14}),"Create new snippet"]}),void 0!==m&&A&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>m(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eJ.Z,{size:14}),"Rename folder"]}),void 0!==p&&A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e7.uP,{}),(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>p(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eX.Z,{size:14}),"Delete folder"]})]})]}):d?(0,a.jsxs)(a.Fragment,{children:[void 0!==f&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>f(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eH.Z,{size:14}),"Move selected queries"]}),(0,a.jsx)(e7.uP,{}),void 0!==p&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>p(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eX.Z,{size:14}),"Delete selected queries"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e7.Zo,{asChild:!0,className:"gap-x-2",onSelect:()=>{},onFocusCapture:e=>e.stopPropagation(),children:(0,a.jsxs)(et(),{href:"/project/".concat(_,"/sql/").concat(t.id),target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(H.Z,{size:14}),"Open in new tab"]})}),(0,a.jsx)(e7.uP,{}),void 0!==m&&A&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>m(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eJ.Z,{size:14}),"Rename query"]}),void 0!==f&&A&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>f(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(eH.Z,{size:14}),"Move query"]}),void 0!==x&&!U&&$&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>x(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(e0.Z,{size:14}),"Share query with team"]}),void 0!==h&&U&&A&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>h(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(e1.Z,{size:14}),"Unshare query with team"]}),void 0!==v&&U&&!A&&$&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>v(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(e2.Z,{size:14}),"Duplicate personal copy"]}),void 0!==y&&R.Qy&&(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>y(),onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(e4.Z,{size:14}),"Download as migration file"]}),void 0!==p&&A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e7.uP,{}),(0,a.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>p(),children:[(0,a.jsx)(eX.Z,{size:14}),"Delete query"]})]})]})})]}),(ei?ee:b)&&"string"==typeof t.id&&S&&(0,a.jsx)("div",{className:"px-4 py-1",style:{paddingLeft:!t.isBranch&&t.level>1?48*(t.level-1):void 0},children:(0,a.jsx)(L.z,{type:"outline",size:"tiny",block:!0,loading:ei?X:N,disabled:ei?X:N,onClick:function(){ei?en():"function"==typeof w&&w()},children:"Load More"})})]})},tt=e=>{var t,n,r,i;let{searchText:l,sort:o="inserted_at",setIsSearching:c}=e,u=l.trim(),p=(0,$.Nr)(u,250),m=u.length>0,f=(0,z.useRouter)(),{profile:x}=(0,T.Un)(),h=(0,b.Vm)(),{ref:y,id:v}=(0,R.UO)(),g=(0,B.B0)(),[j,S]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[M,C]=(0,s.useState)(!1),[L,q]=(0,s.useState)(!1),[E,P]=(0,s.useState)(!1),[D,I]=(0,s.useState)(!1),[k,Z]=(0,s.useState)(!0),[F,A]=(0,s.useState)(),[O,U]=(0,s.useState)([]),[J,X]=(0,s.useState)(),[H,ee]=(0,s.useState)(),[et,en]=(0,s.useState)(),[ea,es]=(0,s.useState)(),[er,eo]=(0,s.useState)(),ed=null===(t=g.snippets[v])||void 0===t?void 0:t.snippet,{data:ec,isLoading:eu,isPreviousData:ep,isFetching:ex,hasNextPage:eh,fetchNextPage:ey,isFetchingNextPage:ev}=(0,eO.md)({projectRef:y,name:p,sort:o},{keepPreviousData:!0});(0,s.useEffect)(()=>{y&&ec&&ec.pages.forEach(e=>{var t,n;null===(t=e.contents)||void 0===t||t.forEach(e=>{g.addSnippet({projectRef:y,snippet:e})}),null===(n=e.folders)||void 0===n||n.forEach(e=>{g.addFolder({projectRef:y,folder:e})})})},[y,null==ec?void 0:ec.pages]);let[eg,ej]=(0,s.useState)({}),eS=(0,s.useMemo)(()=>{var e;let t=null!==(e=null==ec?void 0:ec.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[],n=Object.values(eg).reduce((e,t)=>{var n;let a=(null!==(n=t.snippets)&&void 0!==n?n:[]).filter(t=>!e.snippetIds.has(t.id)),s=new Set(a.map(e=>e.id));return{snippets:[...e.snippets,...a],isLoading:e.isLoading||t.isLoading,snippetIds:new Set([...e.snippetIds,...s])}},{snippets:t,isLoading:eu||ep&&ex,snippetIds:new Set(t.map(e=>e.id))});return ed&&"user"===ed.visibility&&!n.snippetIds.has(ed.id)&&(n.snippetIds.add(ed.id),n.snippets=[...n.snippets,ed]),n},[null==ec?void 0:ec.pages,eg,eu,ep,ex,ed]),eb=(0,s.useMemo)(()=>{var e,t;return null!==(t=null===(e=eS.snippets)||void 0===e?void 0:e.filter(e=>"user"===e.visibility).sort((e,t)=>"name"===o?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[eS.snippets,o]),eN=(0,B.Gd)(y),{data:eM}=eF({projectRef:y,type:"sql",visibility:"user",name:p}),eC=eb.length,eL=(0,s.useMemo)(()=>0===eN.length&&0===eb.length?[eW]:eY({folders:eN,contents:eb}),[eN,eb]),eq=(0,s.useMemo)(()=>eK(eL),[eL]),{data:eQ,isLoading:eE,hasNextPage:e_,fetchNextPage:eI,isFetchingNextPage:ek,isSuccess:eZ}=(0,eT.v)({projectRef:y,favorite:!0,name:p,sort:o},{enabled:E,keepPreviousData:!0});(0,s.useEffect)(()=>{void 0!==y&&eZ&&eQ.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{g.addSnippet({projectRef:y,snippet:e})})})},[y,null==ec?void 0:ec.pages]);let ez=(0,s.useMemo)(()=>{var e,t;let n=null!==(e=null==eQ?void 0:eQ.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[];return ed&&ed.favorite&&!n.find(e=>e.id===ed.id)&&n.push(ed),null!==(t=n.map(e=>({...e,folder_id:void 0})).sort((e,t)=>"name"===o?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[null==eQ?void 0:eQ.pages,ed,o]),{data:e$}=eF({projectRef:y,type:"sql",favorite:!0,name:p}),eJ=ez.length,eX=(0,s.useMemo)(()=>0===eJ?[eW]:eY({contents:ez}),[ez,eJ]),eH=(0,s.useMemo)(()=>eK(eX),[eX]),{data:e0,isLoading:e1,hasNextPage:e2,fetchNextPage:e4,isFetchingNextPage:e6,isSuccess:e8}=(0,eT.v)({projectRef:y,visibility:"project",name:p,sort:o},{enabled:D,keepPreviousData:!0});(0,s.useEffect)(()=>{void 0!==y&&e8&&e0.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{g.addSnippet({projectRef:y,snippet:e})})})},[y,null==ec?void 0:ec.pages]);let e3=(0,s.useMemo)(()=>{var e,t;let n=null!==(e=null==e0?void 0:e0.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[];return ed&&"project"===ed.visibility&&!n.find(e=>e.id===ed.id)&&n.push(ed),null!==(t=n.sort((e,t)=>"name"===o?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[null==e0?void 0:e0.pages,ed,o]),{data:e5}=eF({projectRef:y,type:"sql",visibility:"project",name:p}),e9=e3.length,e7=(0,s.useMemo)(()=>0===e9?[eW]:eY({contents:e3}),[e3,e9]),tt=(0,s.useMemo)(()=>eK(e7),[e7]),{mutate:tn,isLoading:ta}=(0,ef.R)({onError:e=>{d.Am.error("Failed to update query: ".concat(e.message))}}),{mutate:ts,isLoading:tr}=(0,eA.z)({onError:(e,t)=>{e.message.includes("Contents not found")?to(t.ids):d.Am.error("Failed to delete query: ".concat(e.message))}}),{mutate:ti,isLoading:tl}=eR({onSuccess:(e,t)=>{d.Am.success("Successfully deleted folder");let{ids:n}=t;g.removeFolder(n[0]),eo(void 0)}}),to=e=>{C(!1),U([]);let t=Object.keys(g.snippets).filter(t=>!e.includes(t));0===t.length?f.push("/project/".concat(y,"/sql/new")):e.includes(v)&&f.push("/project/".concat(y,"/sql/").concat(t[0])),e.length>0&&e.forEach(e=>g.removeSnippet(e))},td=async e=>{var t;let n="share"===e?J:H;if(!y)return console.error("Project ref is required");if(!n)return console.error("Snippet ID is required");let a=g.snippets[n.id],s=null==a?void 0:null===(t=a.snippet)||void 0===t?void 0:t.content;if(void 0===s){let{content:e}=await (0,em.A)({projectRef:y,id:n.id});s=e}if(void 0===s)return d.Am.error("Unable to update snippet visibility: Content is missing");let r="share"===e?"project":"user";tn({projectRef:y,payload:{...n,visibility:r,folder_id:null,content:s}},{onSuccess:()=>{X(void 0),ee(void 0),I(!0),g.updateSnippet({id:n.id,snippet:{visibility:r,folder_id:null},skipSave:!0}),d.Am.success("share"===e?"Snippet is now shared to the project":"Snippet is now unshared from the project")}})},tc=async e=>{if(!x)return console.error("Profile is required");if(!h)return console.error("Project is required");if(!y)return console.error("Project ref is required");if(!v)return console.error("Snippet ID is required");let t="";if(e.content&&e.content.sql)t=e.content.sql;else{let{content:n}=await (0,em.A)({projectRef:y,id:e.id});"sql"in n&&(t=n.sql)}let n=(0,ei.wI)({id:(0,eB.Z)(),name:e.name,sql:t,owner_id:null==x?void 0:x.id,project_id:null==h?void 0:h.id});g.addSnippet({projectRef:y,snippet:n}),g.addNeedsSaving(n.id),f.push("/project/".concat(y,"/sql/").concat(n.id))},tu=async()=>{if(!y)return console.error("Project ref is required");if(void 0===er)return console.error("No folder is selected");let e=eb.filter(e=>e.folder_id===er.id);if(e.length>0){let t=e.map(e=>e.id);ts({projectRef:y,ids:t},{onSuccess:()=>{t.forEach(e=>g.removeSnippet(e)),to(t),ti({projectRef:y,ids:[null==er?void 0:er.id]})}})}else ti({projectRef:y,ids:[null==er?void 0:er.id]})},tp=e=>{let t=eb.map(e=>e.id),n=t.indexOf(v),a=t.indexOf(e),s=Math.min(n,a),r=Math.max(n,a),i=[],l=eb[s].folder_id===eb[r].folder_id;for(let e=s;e<=r;e++)l&&eb[e].folder_id===eb[s].folder_id&&i.push(eb[e]);U(i)};return(0,s.useEffect)(()=>{null==c||c(eS.isLoading)},[eS.isLoading,c]),(0,s.useEffect)(()=>{void 0===ed||j||("project"===ed.visibility&&I(!0),ed.folder_id&&A([ed.folder_id]),S(!0))},[ed,j,o,p]),(0,s.useEffect)(()=>{U([])},[v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.qs,{"data-sentry-element":"InnerSideMenuSeparator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsxs)(V.GZ,{open:D,onOpenChange:I,className:"px-0","data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,a.jsx)(V.Qn,{title:"Shared","data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(V.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:e1?(0,a.jsx)(eG,{}):0===e9?(0,a.jsx)(V.Cf,{className:(0,Q.cn)("mx-2 px-3",m?"[&>div>p]:text-foreground-lighter":""),title:m?"No results found based on your search":"No shared queries",description:m?void 0:"Share queries with your team by right-clicking on the query"}):(0,a.jsx)(eU.LQ,{data:e7,"aria-label":"project-level-snippets",nodeRenderer:e=>{let{element:t,...n}=e;return(0,a.jsx)(te,{...n,element:t,onSelectDelete:()=>{C(!0),U([t.metadata])},onSelectRename:()=>{q(!0),en(t.metadata)},onSelectDownload:()=>{es(t.metadata)},onSelectCopyPersonal:()=>{tc(t.metadata)},onSelectUnshare:()=>{ee(t.metadata)},isLastItem:tt.has(t.id),hasNextPage:e2,fetchNextPage:e4,isFetchingNextPage:e6})}})})]}),(0,a.jsx)(V.qs,{"data-sentry-element":"InnerSideMenuSeparator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsxs)(V.GZ,{className:"px-0",open:E,onOpenChange:P,"data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,a.jsx)(V.Qn,{title:"Favorites","data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(V.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:eE?(0,a.jsx)(eG,{}):0===eJ?(0,a.jsx)(V.Cf,{title:m?"No results found based on your search":"No favorite queries",className:(0,Q.cn)("mx-2 px-3",m?"[&>div>p]:text-foreground-lighter":""),description:m?null:(0,a.jsxs)(a.Fragment,{children:["Save a query to favorites for easy accessibility by clicking the"," ",(0,a.jsx)(G.Z,{size:12,className:"inline-block relative align-center -top-[1px]"})," ","icon."]})}):(0,a.jsx)(eU.LQ,{data:eX,"aria-label":"favorite-snippets",nodeRenderer:e=>{let{element:t,...n}=e;return(0,a.jsx)(te,{...n,element:t,onSelectDelete:()=>{C(!0),U([t.metadata])},onSelectRename:()=>{q(!0),en(t.metadata)},onSelectDownload:()=>{es(t.metadata)},onSelectCopyPersonal:()=>{tc(t.metadata)},onSelectShare:()=>X(t.metadata),onSelectUnshare:()=>{ee(t.metadata)},isLastItem:eH.has(t.id),hasNextPage:e_,fetchNextPage:eI,isFetchingNextPage:ek})}})})]}),(0,a.jsx)(V.qs,{"data-sentry-element":"InnerSideMenuSeparator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsxs)(V.GZ,{open:k,onOpenChange:Z,className:"px-0","data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,a.jsx)(V.Qn,{title:"PRIVATE","data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(V.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:eu?(0,a.jsx)(eG,{}):0===eN.length&&0===eC?(0,a.jsx)(V.Cf,{className:"mx-3 px-4",title:"No queries created yet",description:"Queries will be automatically saved once you start writing in the editor"}):(0,a.jsx)(eU.LQ,{multiSelect:!0,togglableSelect:!0,clickAction:"EXCLUSIVE_SELECT",data:eL,selectedIds:O.map(e=>e.id),"aria-label":"private-snippets",expandedIds:F,nodeRenderer:e=>{let{element:t,...n}=e;return(0,a.jsx)(te,{...n,element:t,isMultiSelected:O.length>1,isLastItem:eq.has(t.id),status:n.isBranch?g.folders[t.id].status:"idle",onMultiSelect:tp,onSelectCreate:()=>{if(x&&h){let e=(0,ei.wI)({id:(0,eB.Z)(),name:eD.$C,owner_id:null==x?void 0:x.id,project_id:null==h?void 0:h.id,folder_id:t.id,sql:""});g.addSnippet({projectRef:h.ref,snippet:e}),f.push("/project/".concat(y,"/sql/").concat(e.id))}},onSelectDelete:()=>{n.isBranch?eo(t.metadata):(C(!0),0===O.length&&U([t.metadata]))},onSelectRename:()=>{n.isBranch?g.editFolder(t.id):(q(!0),en(t.metadata))},onSelectMove:()=>{N(!0),0===O.length&&U([t.metadata])},onSelectDownload:()=>es(t.metadata),onSelectShare:()=>X(t.metadata),onEditSave:e=>{0===e.length&&"new-folder"===t.id?g.removeFolder(t.id):e.length>0&&g.saveFolder({id:t.id,name:e})},hasNextPage:eh,fetchNextPage:ey,isFetchingNextPage:ev,sort:o,name:p,onFolderContentsChange:e=>{let{isLoading:n,snippets:a}=e;ej(e=>({...e,[t.id]:{snippets:a,isLoading:n}}))}})}})})]}),(0,a.jsx)(eV.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(eP,{snippet:et,visible:L,onCancel:()=>q(!1),onComplete:()=>q(!1),"data-sentry-element":"RenameQueryModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(ew,{snippets:O,visible:w,onClose:()=>{N(!1),U([])},"data-sentry-element":"MoveQueryModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(el,{id:null!==(i=null==ea?void 0:ea.id)&&void 0!==i?i:"",visible:void 0!==ea,onCancel:()=>es(void 0),"data-sentry-element":"DownloadSnippetModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)(_.Z,{size:"medium",loading:ta,title:"Confirm to share query: ".concat(null==J?void 0:J.name),confirmLabel:"Share query",confirmLabelLoading:"Sharing query",visible:void 0!==J,onCancel:()=>X(void 0),onConfirm:()=>td("share"),alert:{title:"This SQL query will become public to all team members",description:"Anyone with access to the project can view it"},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,a.jsxs)("ul",{className:"text-sm text-foreground-light space-y-5",children:[(0,a.jsxs)("li",{className:"flex gap-3 items-center",children:[(0,a.jsx)(W.Z,{size:16,"data-sentry-element":"Eye","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)("span",{children:"Project members will have read-only access to this query."})]}),(0,a.jsxs)("li",{className:"flex gap-3 items-center",children:[(0,a.jsx)(Y.Z,{size:16,"data-sentry-element":"Unlock","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)("span",{children:"Anyone will be able to duplicate it to their personal snippets."})]})]})}),(0,a.jsx)(_.Z,{size:"medium",title:"Confirm to unshare query: ".concat(null==H?void 0:H.name),confirmLabel:"Unshare query",confirmLabelLoading:"Unsharing query",visible:void 0!==H,onCancel:()=>ee(void 0),onConfirm:()=>td("unshare"),alert:{title:"This SQL query will no longer be public to all team members",description:"Only you will have access to this query"},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,a.jsx)("ul",{className:"text-sm text-foreground-light space-y-5",children:(0,a.jsxs)("li",{className:"flex gap-3",children:[(0,a.jsx)(K.Z,{"data-sentry-element":"EyeOffIcon","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,a.jsx)("span",{children:"Project members will no longer be able to view this query."})]})})}),(0,a.jsx)(_.Z,{size:"small",title:"Confirm to delete ".concat(1===O.length?"query":"".concat(O.length.toLocaleString()," quer").concat(O.length>1?"ies":"y")),confirmLabel:"Delete ".concat(O.length.toLocaleString()," quer").concat(O.length>1?"ies":"y"),confirmLabelLoading:"Deleting query",loading:tr,visible:M,variant:"destructive",onCancel:()=>{C(!1),U([])},onConfirm:()=>{if(!y)return console.error("Project ref is required");ts({projectRef:y,ids:O.map(e=>e.id)},{onSuccess:e=>{d.Am.success("Successfully deleted ".concat(O.length.toLocaleString()," quer").concat(O.length>1?"ies":"y")),to(e)}})},alert:(null===(n=O[0])||void 0===n?void 0:n.visibility)==="project"?{title:"This SQL snippet will be lost forever",description:"Deleting this query will remove it for all members of the project team."}:void 0,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,a.jsxs)("p",{className:"text-sm",children:["This action cannot be undone."," ",1===O.length?"Are you sure you want to delete '".concat(null===(r=O[0])||void 0===r?void 0:r.name,"'?"):"Are you sure you want to delete the selected ".concat(O.length," quer").concat(O.length>1?"ies":"y","?")]})}),(0,a.jsx)(_.Z,{size:"small",title:"Confirm to delete folder",confirmLabel:"Delete folder",confirmLabelLoading:"Deleting folder",loading:tl,visible:void 0!==er,variant:"destructive",onCancel:()=>eo(void 0),onConfirm:tu,alert:{title:"This action cannot be undone",description:"All SQL snippets within the folder will be permanently removed, and cannot be recovered."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,a.jsxs)("p",{className:"text-sm",children:["Are you sure you want to delete the folder '",null==er?void 0:er.name,"'?"]})})]})};var tn=n(45125);let ta=e=>{let{onViewOngoingQueries:t}=e,n=(0,z.useRouter)(),{profile:r}=(0,T.Un)(),i=(0,b.Vm)(),{ref:l}=(0,R.UO)(),o=(0,B.B0)(),[c,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(!1),[f,x]=(0,tn._)("sql-editor-sort","inserted_at"),h=(0,O.Xo)(k.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==r?void 0:r.id},subject:{id:null==r?void 0:r.id}}),y=()=>{if(!l)return console.error("Project ref is required");o.addNewFolder({projectRef:l})},v=async()=>{if(!l)return console.error("Project ref is required");if(!i)return console.error("Project is required");if(!r)return console.error("Profile is required");if(!h)return(0,d.Am)("Your queries will not be saved as you do not have sufficient permissions");try{n.push("/project/".concat(l,"/sql/new?skip=true")),u("")}catch(e){d.Am.error("Failed to create new query: ".concat(e.message))}};return(0,a.jsxs)("div",{className:"h-full flex flex-col justify-between","data-sentry-component":"SQLEditorMenu","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsxs)("div",{className:"mt-4 mb-2 flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"mx-4 flex items-center justify-between gap-x-2",children:[(0,a.jsx)(V.nM,{className:"w-full p-0 gap-0","data-sentry-element":"InnerSideBarFilters","data-sentry-source-file":"SQLEditorMenu.tsx",children:(0,a.jsx)(V.nn,{name:"search-queries",placeholder:"Search queries...","aria-labelledby":"Search queries",value:c,onChange:e=>u(e.target.value),isLoading:p,"data-sentry-element":"InnerSideBarFilterSearchInput","data-sentry-source-file":"SQLEditorMenu.tsx",children:(0,a.jsxs)(V.ZY,{value:f,onValueChange:e=>x(e),"data-sentry-element":"InnerSideBarFilterSortDropdown","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsx)(V.IR,{value:"name","data-sentry-element":"InnerSideBarFilterSortDropdownItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:"Alphabetical"},"name"),(0,a.jsx)(V.IR,{value:"inserted_at","data-sentry-element":"InnerSideBarFilterSortDropdownItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:"Created At"},"inserted_at")]})})}),(0,a.jsxs)(U.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsx)(U.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"SQLEditorMenu.tsx",children:(0,a.jsx)(L.z,{type:"default",icon:(0,a.jsx)(Z.Z,{className:"text-foreground"}),className:"w-[26px]","data-sentry-element":"Button","data-sentry-source-file":"SQLEditorMenu.tsx"})}),(0,a.jsxs)(U.AW,{align:"end",side:"bottom",className:"w-48","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsxs)(U.Xi,{className:"gap-x-2",onClick:()=>v(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsx)(F.Z,{size:14,"data-sentry-element":"FilePlus","data-sentry-source-file":"SQLEditorMenu.tsx"}),"Create a new snippet"]}),(0,a.jsxs)(U.Xi,{className:"gap-x-2",onClick:()=>y(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,a.jsx)(A.Z,{size:14,"data-sentry-element":"FolderPlus","data-sentry-source-file":"SQLEditorMenu.tsx"}),"Create a new folder"]})]})]})]}),(0,a.jsxs)("div",{className:"px-2",children:[(0,a.jsx)(V.DS,{title:"Templates",isActive:n.asPath==="/project/".concat(l,"/sql/templates"),href:"/project/".concat(l,"/sql/templates"),"data-sentry-element":"InnerSideMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:"Templates"}),(0,a.jsx)(V.DS,{title:"Quickstarts",isActive:n.asPath==="/project/".concat(l,"/sql/quickstarts"),href:"/project/".concat(l,"/sql/quickstarts"),"data-sentry-element":"InnerSideMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:"Quickstarts"})]}),(0,a.jsx)(tt,{searchText:c,sort:f,setIsSearching:m,"data-sentry-element":"SQLEditorNavV2","data-sentry-source-file":"SQLEditorMenu.tsx"})]}),(0,a.jsx)("div",{className:"p-4 border-t sticky bottom-0 bg-studio",children:(0,a.jsx)(L.z,{block:!0,type:"default",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"SQLEditorMenu.tsx",children:"View running queries"})})]})};var ts=(0,D.Q)(e=>{let{title:t,children:n}=e,{viewOngoingQueries:r}=(0,R.UO)(),[i,l]=(0,s.useState)(!1),o=(0,s.useMemo)(()=>(0,a.jsx)(ta,{onViewOngoingQueries:()=>l(!0)},"sql-editor-menu"),[]);return(0,s.useEffect)(()=>{"true"===r&&l(!0)},[r]),(0,a.jsxs)(I.Z,{title:t||"SQL",product:"SQL Editor",productMenu:o,isBlocking:!1,resizableSidebar:!0,"data-sentry-element":"ProjectLayout","data-sentry-component":"SQLEditorLayout","data-sentry-source-file":"SQLEditorLayout.tsx",children:[n,(0,a.jsx)(P,{visible:i,onClose:()=>l(!1),"data-sentry-element":"OngoingQueriesPanel","data-sentry-source-file":"SQLEditorLayout.tsx"})]})})},42756:function(e,t,n){var a=n(97458),s=n(77317),r=n(52983),i=n(86815);let l=e=>{var t,n,l;let{defaultActiveId:o,activeId:d,type:c="pills",size:u="tiny",block:p,onChange:m,onClick:f,scrollable:x,wrappable:h,addOnBefore:y,addOnAfter:v,listClassNames:g,baseClassNames:j,refs:S,children:b}=e,w=r.Children.toArray(b),[N,M]=(0,r.useState)(null!==(l=null!=d?d:o)&&void 0!==l?l:null==w?void 0:null===(n=w[0])||void 0===n?void 0:null===(t=n.props)||void 0===t?void 0:t.id);(0,r.useMemo)(()=>{d&&d!==N&&M(d)},[d]);let C=(0,i.Z)("tabs");function L(e){null==f||f(e),e!==N&&(null==m||m(e),M(e))}let q=[C[c].list];return x&&q.push(C.scrollable),h&&q.push(C.wrappable),g&&q.push(g),(0,a.jsxs)(s.fC,{value:N,className:[C.base,j].join(" "),ref:null==S?void 0:S.base,"data-sentry-element":"unknown","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,a.jsxs)(s.aV,{className:q.join(" "),ref:null==S?void 0:S.list,"data-sentry-element":"unknown","data-sentry-source-file":"Tabs.tsx",children:[y,w.map(e=>{let t=N===e.props.id,n=[C[c].base,C.size[u]];return t?n.push(C[c].active):n.push(C[c].inactive),p&&n.push(C.block),(0,a.jsxs)(s.xz,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),L(e.props.id))},onClick:()=>L(e.props.id),value:e.props.id,className:n.join(" "),children:[e.props.icon,(0,a.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),v]}),w]})};l.Panel=e=>{let{children:t,id:n,className:r}=e,l=(0,i.Z)("tabs");return(0,a.jsx)(s.VY,{value:n,className:[l.content,r].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Panel","data-sentry-source-file":"Tabs.tsx",children:t})},t.Z=l},50290:function(e,t,n){n.d(t,{O:function(){return r}});var a=n(97458),s=n(39635);function r(e){let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...n,"data-sentry-component":"Skeleton","data-sentry-source-file":"skeleton.tsx"})}}}]);